// jStepper 1.3.1
function AddOrSubtractTwoFloats(a,b,c){var d=a.toString();var e=b.toString();var f="";if(d.indexOf(".")>-1||e.indexOf(".")>-1){if(d.indexOf(".")==-1){d=d+".0"}if(e.indexOf(".")==-1){e=e+".0"}var g=d.substr(d.indexOf(".")+1);var h=e.substr(e.indexOf(".")+1);var i=d.substr(0,d.indexOf("."));var j=e.substr(0,e.indexOf("."));var k=true;while(k){if(g.length!=h.length){if(g.length<h.length){g+="0"}else{h+="0"}}else{k=false}}var l=g.length;for(var m=0;m<=g.length-1;m++){i=i+g.substr(m,1);j=j+h.substr(m,1)}var n=Number(i);var o=Number(j);var p;if(c){p=n+o}else{p=n-o}f=p.toString();for(var q=0;q<l-f.length+1;q++){f="0"+f}if(f.length>=l){f=f.substring(0,f.length-l)+"."+f.substring(f.length-l)}}else{if(c){f=Number(a)+Number(b)}else{f=Number(a)-Number(b)}}return Number(f)}(function(a){function b(b,c){var d=a(c);var e=d.val();if(b.disableNonNumeric){e=e.replace(/[^\d\.,\-]/gi,"")}if(b.maxValue!==null){if(e>=b.maxValue){e=b.maxValue}}if(b.minValue!==null){if(e<b.minValue&&e!=""){e=b.minValue}}d.val(e)}function c(c,d,e,f){var g=a(f);var h;if(e){if(e.ctrlKey){h=c.ctrlStep}else if(e.shiftKey){h=c.shiftStep}else{h=c.normalStep}}else{h=c.normalStep}var i=g.val();var j=i.length-f.selectionStart;var k=i.length-f.selectionEnd;i=i.replace(/,/g,".");i=i.replace(c.decimalSeparator,".");i=i+"";if(i.indexOf(".")!=-1){i=i.match(new RegExp("-{0,1}[0-9]+[\\.][0-9]*"))}i=i+"";if(i.indexOf("-")!=-1){i=i.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*"))}i=i+"";i=i.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*"));if(i===""||i=="-"||i===null){i=c.defaultValue}if(d==1){i=AddOrSubtractTwoFloats(i,h,true)}else{i=AddOrSubtractTwoFloats(i,h,false)}var l=false;if(c.maxValue!==null){if(i>=c.maxValue){i=c.maxValue;l=true}}if(c.minValue!==null){if(i<=c.minValue){i=c.minValue;l=true}}i=i+"";if(c.minLength!==null){var m=i.length;if(i.indexOf(".")!=-1){m=i.indexOf(".")}var n=false;if(i.indexOf("-")!=-1){n=true;i=i.replace(/-/,"")}if(m<c.minLength){for(var o=1;o<=c.minLength-m;o++){i="0"+i}}if(n){i="-"+i}}i=i+"";var p;if(c.minDecimals>0){var q;if(i.indexOf(".")!=-1){p=i.length-(i.indexOf(".")+1);if(p<c.minDecimals){q=c.minDecimals-p}}else{q=c.minDecimals;i=i+"."}for(var r=1;r<=q;r++){i=i+"0"}}if(c.maxDecimals>0){p=0;if(i.indexOf(".")!=-1){p=i.length-(i.indexOf(".")+1);if(c.maxDecimals<p){i=i.substring(0,i.indexOf("."))+"."+i.substring(i.indexOf(".")+1,i.indexOf(".")+1+c.maxDecimals)}}}if(!c.allowDecimals){i=i+"";i=i.replace(new RegExp("[\\.].+"),"")}i=i.replace(/\./,c.decimalSeparator);g.val(i);f.selectionStart=i.length-j;f.selectionEnd=i.length-k;b(c,f);if(c.onStep){c.onStep(g,d,l)}return false}a.fn.jStepper=function(d){var e=a.extend({},a.fn.jStepper.defaults,d);return this.each(function(){var d=a(this);var f=a.meta?a.extend({},e,d.data()):e;if(f.disableAutocomplete){d.attr("autocomplete","off")}if(a.isFunction(d.mousewheel)){d.mousewheel(function(a,b){if(b>0){c(f,1,a,this);return false}else if(b<0){c(f,0,a,this);return false}})}d.keydown(function(a){var b=a.keyCode;if(b==38){c(f,1,a,this)}if(b==40){c(f,0,a,this)}});d.keyup(function(a){b(f,this)})})};a.fn.jStepper.defaults={maxValue:null,minValue:null,normalStep:1,shiftStep:5,ctrlStep:10,minLength:null,disableAutocomplete:true,defaultValue:1,decimalSeparator:",",allowDecimals:true,minDecimals:0,maxDecimals:null,disableNonNumeric:true,onStep:null}})(jQuery);